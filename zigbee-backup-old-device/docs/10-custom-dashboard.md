# Custom Climate Dashboard v2.0

> **5 Beautiful Ways to Visualize Your Home's Climate**
> Multi-view real-time dashboard with Apple-inspired design

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ  üè† Home Climate              ‚óè LIVE               Sat, Dec 7 ¬∑ 5:30 PM    ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                             ‚îÇ
‚îÇ   [üéØ Score]  [üìä Compare]  [üó∫Ô∏è Floor Plan]  [üå°Ô∏è Ambient]  [üìñ Timeline]   ‚îÇ
‚îÇ       ‚óè           ‚óã              ‚óã               ‚óã             ‚óã            ‚îÇ
‚îÇ                                                                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ                                                                             ‚îÇ
‚îÇ                        VIEW 1: COMFORT SCORE                                ‚îÇ
‚îÇ                                                                             ‚îÇ
‚îÇ                         ‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ                                       ‚îÇ
‚îÇ                         ‚îÇ    78     ‚îÇ                                       ‚îÇ
‚îÇ                         ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ                                       ‚îÇ
‚îÇ                         ‚îÇCOMFORTABLE‚îÇ                                       ‚îÇ
‚îÇ                         ‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ                                       ‚îÇ
‚îÇ                                                                             ‚îÇ
‚îÇ              [üõãÔ∏è 82] [üõèÔ∏è 85] [üìö 76] [üç≥ 71] [üöø 68]                        ‚îÇ
‚îÇ                                                                             ‚îÇ
‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚óè Connected ‚îÇ 5 sensors ‚îÇ Last update: 2s ago                              ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## Quick Start

```bash
# 1. Start local server (from Mac)
cd ~/pyrepos/siva-personal/zigbee/dashboard
python3 -m http.server 8888

# 2. Open in browser
open http://localhost:8888

# 3. Use keyboard shortcuts 1-5 to switch views
```

---

## üé¨ The 5 Dashboard Views

| Key | View | Best For | Description |
|-----|------|----------|-------------|
| `1` | üéØ **Comfort Score** | Quick glance | Single number (0-100) showing overall comfort |
| `2` | üìä **Bar Compare** | Analysis | Side-by-side room comparison with bars |
| `3` | üó∫Ô∏è **Floor Plan** | Spatial thinkers | Heat map on your actual floor layout |
| `4` | üå°Ô∏è **Ambient** | Wall tablets | Giant display readable from across room |
| `5` | üìñ **Timeline** | Pattern seekers | Chronological story of climate events |

---

## View 1: Comfort Score

> *"One number to rule them all"*

```
                    ‚ï≠‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïÆ
                    ‚îÇ     78      ‚îÇ  ‚Üê Score 0-100
                    ‚îÇ  ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ  ‚îÇ
                    ‚îÇ COMFORTABLE ‚îÇ  ‚Üê Human-readable label
                    ‚ï∞‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ïØ

        [üõãÔ∏è 82] [üõèÔ∏è 85] [üìö 76] [üç≥ 71] [üöø 68]  ‚Üê Per-room scores
```

**Score Algorithm:**
- Temperature: 70% of score (ideal: 20-26¬∞C, perfect: 23¬∞C)
- Humidity: 30% of score (ideal: 40-60%, perfect: 50%)
- Room weights: Living 1.5x, Bedroom 1.3x, Study 1.0x, Kitchen 0.8x, Bath 0.5x

**Score Labels:**
| Score | Label | Color |
|-------|-------|-------|
| 90-100 | Perfect | Green |
| 75-89 | Comfortable | Light Green |
| 60-74 | Okay | Yellow |
| 40-59 | Uncomfortable | Orange |
| 0-39 | Poor | Red |

---

## View 2: Bar Comparison

> *"See differences instantly"*

```
üå°Ô∏è TEMPERATURE                        üíß HUMIDITY
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ        ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
üöø Bath    ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñì 27¬∞  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà 72%
üç≥ Kitchen ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë 26¬∞  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñí‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 45%
üìö Study   ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë 25¬∞  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 48%
üõãÔ∏è Living  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 24¬∞  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë 58%
üõèÔ∏è Bedroom ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñí‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 23¬∞  ‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñà‚ñë‚ñë‚ñë‚ñë‚ñë‚ñë 52%
           ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚î§      ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚î§
           18¬∞  22¬∞  26¬∞  30¬∞         0%   25%  50%  75%
              comfort zone               ideal range

üìä AUTO-INSIGHTS
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ üî∫ TEMPERATURE GAP: Bathroom is 4.6¬∞ warmer than Bedroom   ‚îÇ
‚îÇ üíß HUMIDITY ALERT: Bathroom at 72% ‚Äî consider ventilation  ‚îÇ
‚îÇ ‚úì  GOOD NEWS: Living Room is in the ideal comfort zone     ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

**Controls:**
- View toggle: Temperature / Humidity / Both
- Sort: Temperature / Humidity / Name / Comfort Score
- Click bar to expand 24-hour mini chart

---

## View 3: 3D Floor Plan

> *"Walk through your data"*

An immersive **Three.js-powered 3D visualization** of your apartment with real-time temperature/humidity heatmaps. Rotate, zoom, and explore your home's climate from any angle.

### Apartment Layout (9.239m √ó 7.665m)

```
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ                    APARTMENT (9.239m √ó 7.665m)                       ‚îÇ
‚îÇ                                                                      ‚îÇ
‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê         ‚îÇ
‚îÇ  ‚îÇ        ‚îÇ                         ‚îÇ                     ‚îÇ   üö™    ‚îÇ
‚îÇ  ‚îÇBALCONY ‚îÇ     LIVING ROOM         ‚îÇ     BEDROOM         ‚îÇ  Main   ‚îÇ
‚îÇ  ‚îÇ1.05√ó1.2‚îÇ     5.91m √ó 3.97m       ‚îÇ    4.49m √ó 3.38m    ‚îÇ  Door   ‚îÇ
‚îÇ  ‚îÇ  üåø    ‚îÇ     üõãÔ∏è  (Green)         ‚îÇ    üõèÔ∏è  (Yellow)     ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ        ‚îÇ                         ‚îÇ                     ‚îÇ         ‚îÇ
‚îÇ  ‚îÇ   ü™ü   ‚îÇ         ü™ü              ‚îÇ          ü™ü         ‚îÇ    ü™ü   ‚îÇ
‚îÇ  ‚îú‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚îÇ                                  ‚îÇ                               ‚îÇ
‚îÇ  ‚îÇ       STUDY ROOM                 ‚îÇ         KITCHEN               ‚îÇ
‚îÇ  ‚îÇ       4.885m √ó 3.697m            ‚îÇ       3.33m √ó 2.14m           ‚îÇ
‚îÇ  ‚îÇ       üìö  (Blue)                 ‚îÇ       üç≥  (Red)               ‚îÇ
‚îÇ  ‚îÇ                                  ‚îÇ                               ‚îÇ
‚îÇ  ‚îÇ            ü™ü                    ‚îÇ   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§
‚îÇ  ‚îÇ                                  ‚îÇ   ‚îÇ      BATHROOM             ‚îÇ
‚îÇ  ‚îÇ                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î§   ‚îÇ    3.15m √ó 1.42m          ‚îÇ
‚îÇ  ‚îÇ                    ‚îÇ  HALLWAY    ‚îÇ   ‚îÇ    üöø  (Purple)           ‚îÇ
‚îÇ  ‚îÇ                    ‚îÇ  1.5m√ó2.5m  ‚îÇ   ‚îÇ           ü™ü              ‚îÇ
‚îÇ  ‚îÇ                    ‚îÇ  (Gray)     ‚îÇ   ‚îÇ                           ‚îÇ
‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚î¥‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

### Room Specifications

| Room | Dimensions | Center (x, z) | Color | Icon |
|------|------------|---------------|-------|------|
| Study | 4.885m √ó 3.697m | (2.44, 1.85) | üîµ Blue `#60a5fa` | üìö |
| Living Room | 5.908m √ó 3.968m | (2.95, 5.68) | üü¢ Green `#34d399` | üõãÔ∏è |
| Bedroom | 4.489m √ó 3.378m | (6.99, 5.98) | üü° Yellow `#fbbf24` | üõèÔ∏è |
| Kitchen | 3.331m √ó 2.138m | (7.57, 3.22) | üî¥ Red `#f87171` | üç≥ |
| Bathroom | 3.15m √ó 1.424m | (7.66, 0.71) | üü£ Purple `#a78bfa` | üöø |
| Hallway | 1.5m √ó 2.5m | (5.4, 2.0) | ‚ö™ Gray `#94a3b8` | ‚Äî |
| Balcony | 1.05m √ó 1.2m | (0.53, 7.07) | ü©µ Light Blue `#93c5fd` | üåø |

### 3D Scene Components

```
Scene Graph (~60 meshes, ~40k triangles)
‚îú‚îÄ‚îÄ Floor (base apartment)
‚îú‚îÄ‚îÄ Room Floors (7) ‚îÄ‚îÄ‚îÄ Transparent, color-coded by room
‚îú‚îÄ‚îÄ Walls (20) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Semi-transparent glass (25% opacity)
‚îú‚îÄ‚îÄ Doors (6) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Wood material with metal handles
‚îú‚îÄ‚îÄ Windows (5) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Glass panes + dark gray frames
‚îú‚îÄ‚îÄ Balcony ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Glass panel + metal railings
‚îú‚îÄ‚îÄ Furniture ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Bed in bedroom
‚îî‚îÄ‚îÄ Lighting (3) ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ Ambient + Directional + Fill
```

**Material Properties:**
| Element | Opacity | Metalness | Roughness | Notes |
|---------|---------|-----------|-----------|-------|
| Walls | 25% | 0.4 | 0.08 | Glass-like, see-through |
| Room Floors | 30% | 0.1 | 0.6 | Dynamic heatmap color |
| Doors | 100% | 0.1 | 0.7 | Wood texture (saddle brown) |
| Windows | 40% | 0.3 | 0.1 | Sky blue glass |

### Heatmap Color Scales

**Temperature (smooth interpolation):**
```
18¬∞C ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ 22¬∞C ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ 24¬∞C ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ 26¬∞C ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ 28¬∞C ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ 32¬∞C
  ‚îÇ           ‚îÇ           ‚îÇ           ‚îÇ           ‚îÇ           ‚îÇ
Light Blue ‚Üí Light Green ‚Üí Green ‚Üí Light Yellow ‚Üí Peach ‚Üí Red
  (Cold)      (Cool)    (Comfort)   (Warm)      (Hot)   (Very Hot)
```

**Humidity (smooth interpolation):**
```
30% ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ 40% ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ 50% ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ 60% ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ 70% ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ 85%
  ‚îÇ           ‚îÇ           ‚îÇ           ‚îÇ           ‚îÇ           ‚îÇ
Orange ‚Üí Light Green ‚Üí Green ‚Üí Light Green ‚Üí Light Blue ‚Üí Indigo
 (Dry)    (Ideal)    (Perfect)  (Ideal)     (Humid)   (Very Humid)
```

### Interactive Controls

| Control | Action |
|---------|--------|
| **Left Drag** | Rotate camera around apartment |
| **Right Drag** | Pan/translate view |
| **Scroll** | Zoom in/out (5-40m range) |
| **Top View** | Bird's eye view from above |
| **3D View** | Isometric diagonal angle |
| **Toggle Walls** | Show/hide wall visibility |
| **Auto Rotate** | Continuous 360¬∞ rotation |
| **Dark Theme** | Switch background color |

**Keyboard Shortcuts (in 3D view):**
| Key | Action |
|-----|--------|
| `T` | Top view (bird's eye) |
| `3` | 3D isometric view |

### Floating Room Labels

```
        ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
        ‚îÇ       üìö       ‚îÇ  ‚Üê Room icon
        ‚îÇ   STUDY ROOM    ‚îÇ  ‚Üê Room name
        ‚îÇ     25.2¬∞      ‚îÇ  ‚Üê Temperature
        ‚îÇ      48%       ‚îÇ  ‚Üê Humidity
        ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

- **HTML labels** positioned in 3D space (projected to 2D screen)
- **Smooth fade** when entering/leaving viewport
- **Updates 60fps** with real-time sensor data

### Lighting Setup

```
                    ‚òÄÔ∏è Directional Light (0.8)
                    Position: (15, 20, 15)
                    Casts soft shadows
                         ‚îÇ
                         ‚ñº
    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
    ‚îÇ                                     ‚îÇ
    ‚îÇ         üè† APARTMENT                ‚îÇ‚óÄ‚îÄ‚îÄ üí° Ambient Light (0.6)
    ‚îÇ                                     ‚îÇ
    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                         ‚ñ≤
                         ‚îÇ
                    Fill Light (0.3)
                    Position: (-10, 10, -10)
```

### Implementation Files

| File | Purpose |
|------|---------|
| `dashboard/views/floor-plan-3d.js` | Main 3D view (Alpine component) |
| `dashboard/views/floor-plan.js` | 2D fallback view |
| `dashboard/js/three/orbit-controls.js` | Camera control system |
| `dashboard/js/config.js` | Room dimensions & colors |
| `dashboard/styles/views/3d-view.css` | 3D view styling |
| `prototypes/3d-sensor-monitor.html` | Standalone prototype |

### Source Files

| File | Description |
|------|-------------|
| [floor-map.svg](./floor-map.svg) | Vector floor plan |
| [floor-map.png](./floor-map.png) | PNG export |
| [floor-map.excalidraw](./floor-map.excalidraw) | Editable source (Excalidraw) |

---

## View 4: Ambient Display

> *"Glanceable temperature from across the room"*

```
‚ïî‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïó
‚ïë                                                                ‚ïë
‚ïë                                                                ‚ïë
‚ïë                          24.5¬∞                                 ‚ïë
‚ïë                                                                ‚ïë
‚ïë                       LIVING ROOM                              ‚ïë
‚ïë                           58%                                  ‚ïë
‚ïë                                                                ‚ïë
‚ïë                                                                ‚ïë
‚ïë             ‚óè     ‚óã     ‚óã     ‚óã     ‚óã                          ‚ïë
‚ïë            24¬∞   23¬∞   25¬∞   26¬∞   27¬∞                         ‚ïë
‚ïë            Liv   Bed   Stu   Kit   Bath                        ‚ïë
‚ïë                                                                ‚ïë
‚ïë                   ‚Üê swipe to change room ‚Üí                     ‚ïë
‚ïë                                                                ‚ïë
‚ïö‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïê‚ïù
```

**Features:**
- **Giant display**: 180px+ font, readable from 5 meters
- **Swipe navigation**: Left/right to change rooms
- **Auto-rotate**: Cycles rooms every 10 seconds
- **Dark mode**: Auto-enables 10 PM - 6 AM
- **Tap for details**: Shows min/max today, trend arrow

**Keyboard shortcuts (in Ambient view):**
| Key | Action |
|-----|--------|
| `‚Üê` / `‚Üí` | Previous/next room |
| `d` | Toggle dark mode |
| `a` | Toggle auto-rotate |

---

## View 5: Timeline Story

> *"Data is a story ‚Äî tell it that way"*

```
TODAY'S CLIMATE STORY                          Saturday, Dec 7

NOW ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚óè
                    ‚îÇ
                    ‚îÇ  üõãÔ∏è Living Room ¬∑ 24.5¬∞ ¬∑ 58%
    5:30 PM         ‚îÇ  All 5 rooms are currently comfortable
                    ‚îÇ
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
                    ‚îÇ
                    ‚îÇ  üöø BATHROOM PEAKED
    4:00 PM         ‚îÇ  Temperature hit 29¬∞ (highest today)
                    ‚îÇ  Humidity spiked to 85%
                    ‚îÇ  üí° Likely cause: Hot shower
                    ‚îÇ
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
                    ‚îÇ
                    ‚îÇ  üç≥ KITCHEN HEATING EVENT
    2:15 PM         ‚îÇ  Rose 4¬∞ in 30 minutes
                    ‚îÇ  22.1¬∞ ‚Üí 26.1¬∞
                    ‚îÇ  üí° Likely cause: Cooking activity
                    ‚îÇ
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
                    ‚îÇ
                    ‚îÇ  ‚òÄÔ∏è AFTERNOON SUN
    11:00 AM        ‚îÇ  Study warmed 3¬∞ as sun moved south
                    ‚îÇ  üìä This happens every sunny day at ~11 AM
                    ‚îÇ
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îº‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ
                    ‚îÇ
                    ‚îÇ  üåô OVERNIGHT LOW
    6:30 AM         ‚îÇ  Bedroom dropped to 19.2¬∞ (coldest point)
                    ‚îÇ
‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚óè
    MIDNIGHT
```

**Event Types Detected:**
| Type | Icon | Trigger |
|------|------|---------|
| Peak | üìà | Temperature highest of day |
| Valley | üìâ | Temperature lowest of day |
| Rapid Rise | üî• | +3¬∞ in 30 minutes |
| Rapid Drop | ‚ùÑÔ∏è | -3¬∞ in 30 minutes |
| Humidity Spike | üíß | +15% humidity |

**Cause Inference:**
- Bathroom peak + high humidity ‚Üí "Hot shower"
- Kitchen rise (11 AM-2 PM or 6-9 PM) ‚Üí "Cooking"
- Rise at 10 AM-3 PM ‚Üí "Sun exposure"
- Valley at 3-6 AM ‚Üí "Overnight cooling"

---

## Architecture

```
                                    ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                                    ‚îÇ     Browser/Tablet      ‚îÇ
                                    ‚îÇ   (Alpine.js + MQTT.js) ‚îÇ
                                    ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚î¨‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                                ‚îÇ
                                                ‚îÇ WebSocket
                                                ‚îÇ ws://dietpi.local:9001
                                                ‚ñº
‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê    MQTT     ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
‚îÇ   Zigbee    ‚îÇ ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚ñ∫  ‚îÇ         Mosquitto             ‚îÇ
‚îÇ   Sensors   ‚îÇ             ‚îÇ  ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê   ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê  ‚îÇ
‚îÇ  (5 rooms)  ‚îÇ             ‚îÇ  ‚îÇTCP:1883 ‚îÇ   ‚îÇWS:9001    ‚îÇ  ‚îÇ
‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò             ‚îÇ  ‚îÇ(internal)‚îÇ   ‚îÇ(browser)  ‚îÇ  ‚îÇ
                            ‚îÇ  ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò   ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò  ‚îÇ
                            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
                                     dietpi.local
                                          ‚îÇ
                                          ‚ñº
                            ‚îå‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îê
                            ‚îÇ         InfluxDB              ‚îÇ
                            ‚îÇ   (Historical data storage)   ‚îÇ
                            ‚îî‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îÄ‚îò
```

---

## Prerequisites

### 1. Mosquitto WebSocket Enabled

**File:** `mosquitto/mosquitto.conf`
```conf
# TCP for internal Docker services
listener 1883
protocol mqtt

# WebSocket for browser dashboard
listener 9001
protocol websockets

allow_anonymous true
persistence true
persistence_location /mosquitto/data/
log_dest stdout
```

### 2. Port 9001 Exposed

**File:** `docker-compose.yml`
```yaml
mosquitto:
  ports:
    - "1883:1883"
    - "9001:9001"  # WebSocket for browser
```

### 3. Deploy & Restart

```bash
# Sync config to dietpi
rsync -avz mosquitto/mosquitto.conf root@dietpi.local:/root/zigbee/mosquitto/
rsync -avz docker-compose.yml root@dietpi.local:/root/zigbee/

# Restart mosquitto
ssh root@dietpi.local "cd /root/zigbee && docker compose restart mosquitto"

# Verify WebSocket is listening
ssh root@dietpi.local "docker compose logs mosquitto --tail 5"
# Should show: "Opening websockets listen socket on port 9001."
```

---

## Configuration

Edit `CONFIG` in `dashboard/index.html`:

```javascript
const CONFIG = {
  mqttUrl: 'ws://dietpi.local:9001',
  baseTopic: 'zigbee2mqtt',
  influxUrl: '/api/influx',
  influxDb: 'homeassistant',
  rooms: [
    { id: 'living', name: 'Living Room', icon: 'üõãÔ∏è', sensor: 'Living Room TRH (1)', entityId: 'sensor.living_room_trh_1' },
    { id: 'bedroom', name: 'Bedroom', icon: 'üõèÔ∏è', sensor: 'Bed Room TRH (2)', entityId: 'sensor.bed_room_trh_2' },
    { id: 'study', name: 'Study', icon: 'üìö', sensor: 'Study Room TRH (3)', entityId: 'sensor.study_room_trh_3' },
    { id: 'kitchen', name: 'Kitchen', icon: 'üç≥', sensor: 'Kitchen TRH (4)', entityId: 'sensor.kitchen_trh_4' },
    { id: 'bathroom', name: 'Bathroom', icon: 'üöø', sensor: 'Bath Room TRH (5)', entityId: 'sensor.bath_room_trh_5' }
  ],
  staleThreshold: 5 * 60 * 1000,  // 5 minutes
  maxHistoryPoints: 500,
  historyHours: 6
};
```

---

## Features

| Feature | Description |
|---------|-------------|
| **5 Views** | Score, Compare, 3D Floor Plan, Ambient, Timeline |
| **3D Visualization** | Three.js powered interactive floor plan |
| **Real-time Heatmaps** | Smooth color interpolation for temp/humidity |
| **Interactive Camera** | Rotate, zoom, pan with OrbitControls |
| **Real-time** | Live MQTT updates via WebSocket |
| **Auto-reconnect** | Handles network drops gracefully |
| **Comfort Score** | Weighted algorithm (temp 70%, humidity 30%) |
| **Auto-Insights** | Automatically generated observations |
| **Event Detection** | Peaks, valleys, rapid changes |
| **Cause Inference** | "Likely cause: Hot shower" |
| **Stale Detection** | Dims rooms with old data (>5 min) |
| **Responsive** | Works on tablets, phones, desktop |
| **Kiosk-ready** | Optimized for wall displays |
| **Dark Mode** | Auto-enables at night |
| **No Build Step** | Pure HTML/CSS/JS |

---

## Keyboard Shortcuts

| Key | Action |
|-----|--------|
| `1` | Comfort Score view |
| `2` | Bar Compare view |
| `3` | 3D Floor Plan view |
| `4` | Ambient view |
| `5` | Timeline view |
| `T` | Top view (in 3D Floor Plan) |
| `‚Üê` / `‚Üí` | Change room (Ambient) |
| `d` | Toggle dark mode (Ambient) |
| `a` | Toggle auto-rotate (Ambient)

---

## Tablet/Kiosk Setup

### For iPad/iPhone
1. Open `http://<mac-ip>:8888` in Safari
2. Share ‚Üí Add to Home Screen
3. Settings ‚Üí Guided Access for kiosk mode
4. Settings ‚Üí Display ‚Üí Auto-Lock ‚Üí Never
5. Press `4` for Ambient view

### For Android
1. Open in Chrome
2. Menu ‚Üí Install App / Add to Home Screen
3. Developer Options ‚Üí Stay Awake
4. Press `4` for Ambient view

---

## Coexistence with Other Dashboards

| Dashboard | Use Case | URL |
|-----------|----------|-----|
| **Custom (this)** | Real-time multi-view | `http://localhost:8888` |
| Grafana | Historical analysis | `http://localhost:3333` |
| Home Assistant | Automation control | `http://localhost:8123` |

All run simultaneously - no conflicts.

---

## Troubleshooting

### "Offline" Status
```bash
# Check WebSocket is listening
ssh root@dietpi.local "netstat -tlnp | grep 9001"

# Check mosquitto logs
ssh root@dietpi.local "docker compose logs mosquitto --tail 20"
```

### No Data Displayed
```bash
# Verify sensors are publishing
ssh root@dietpi.local "docker exec mosquitto mosquitto_sub -t 'zigbee2mqtt/#' -v"
```

### Connection Refused
```bash
# Restart mosquitto
ssh root@dietpi.local "cd /root/zigbee && docker compose restart mosquitto"
```

### Debug in Browser Console
```javascript
// Check Alpine stores
Alpine.store('mqtt')        // Connection state
Alpine.store('rooms').list  // Room data

// Test MQTT connection
const client = mqtt.connect('ws://dietpi.local:9001');
client.on('connect', () => console.log('Connected!'));
client.subscribe('zigbee2mqtt/#');
client.on('message', (t, m) => console.log(t, JSON.parse(m.toString())));
```

---

## Tech Stack

| Layer | Technology |
|-------|------------|
| Framework | Alpine.js 3.x |
| State | Alpine.js Stores |
| 3D Rendering | Three.js (ES modules) |
| Camera Controls | OrbitControls |
| MQTT | MQTT.js (CDN) |
| Styling | Vanilla CSS |
| Fonts | Inter (Google Fonts) |
| Server | Python http.server |
| History | InfluxDB |

---

## Version History

| Version | Date | Changes |
|---------|------|---------|
| 2.1 | Dec 7, 2025 | 3D Floor Plan view with Three.js, interactive heatmaps |
| 2.0 | Dec 7, 2025 | Multi-view architecture (5 visions) |
| 1.0 | Dec 6, 2025 | Initial single-view dashboard |
