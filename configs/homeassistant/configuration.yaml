homeassistant:
  name: Home
  unit_system: metric
  time_zone: Australia/Sydney
  internal_url: "http://pi:8123"
  external_url: "https://ha.sivaa.in"
  customize:
    media_player.broken_display:
      friendly_name: "Broken Display"

frontend:
config:

http:
  server_port: 8123
  use_x_forwarded_for: true
  trusted_proxies:
    # Local/Docker
    - 127.0.0.1
    - ::1
    - 172.16.0.0/12
    # Cloudflare IPv4 ranges
    - 173.245.48.0/20
    - 103.21.244.0/22
    - 103.22.200.0/22
    - 103.31.4.0/22
    - 141.101.64.0/18
    - 108.162.192.0/18
    - 190.93.240.0/20
    - 188.114.96.0/20
    - 197.234.240.0/22
    - 198.41.128.0/17
    - 162.158.0.0/15
    - 104.16.0.0/13
    - 104.24.0.0/14
    - 172.64.0.0/13
    - 131.0.72.0/22
    # Cloudflare IPv6 ranges
    - 2400:cb00::/32
    - 2606:4700::/32
    - 2803:f800::/32
    - 2405:b500::/32
    - 2405:8100::/32
    - 2a06:98c0::/29
    - 2c0f:f248::/32

# MQTT auto-discovery enabled by default
# Zigbee2MQTT devices appear automatically

# InfluxDB integration - writes sensor data directly
influxdb:
  host: influxdb
  port: 8086
  database: homeassistant
  default_measurement: state
  include:
    entity_globs:
      - sensor.*temperature*
      - sensor.*humidity*
      - sensor.*battery*
      - sensor.*co2*
      - sensor.*air_quality*

# Recorder for local history
recorder:
  purge_keep_days: 7
  commit_interval: 60
  include:
    entity_globs:
      - sensor.*temperature*
      - sensor.*humidity*
      - sensor.*co2*
      - sensor.*air_quality*

logger:
  default: warning
  logs:
    homeassistant.components.influxdb: info
    homeassistant.components.google_assistant: info

# =============================================================================
# MEDIA SOURCE (Required for TTS)
# =============================================================================
media_source:

# =============================================================================
# TEXT-TO-SPEECH (TTS)
# Purpose: Voice announcements via Google Home speakers
# Docs: https://www.home-assistant.io/integrations/google_translate/
# =============================================================================
tts:
  - platform: google_translate
    language: 'en'

# =============================================================================
# GOOGLE ASSISTANT INTEGRATION
# Purpose: Voice control via Google Home devices
# Docs: https://www.home-assistant.io/integrations/google_assistant/
# =============================================================================
google_assistant:
  project_id: siva-home-assistant-1
  service_account: !include SERVICE_ACCOUNT.json
  report_state: true
  expose_by_default: false
  exposed_domains:
    - light
    - switch
    - sensor
  entity_config:
    # === LIGHTS (Voice controllable) ===
    light.study_ikea_light:
      name: "Study Light"
      expose: true
      room: "Study"
      aliases:
        - "Office Light"
        - "Study Room Light"

    light.living_ikea_light:
      name: "Living Room Light"
      expose: true
      room: "Living Room"
      aliases:
        - "Lounge Light"
        - "Main Light"

    # === SMART PLUG (Voice controllable) ===
    switch.smart_plug_1:
      name: "Smart Plug"
      expose: true
      room: "Living Room"
      aliases:
        - "Plug"
        - "Power Plug"

    # === TEMPERATURE SENSORS (Read-only, queryable) ===
    sensor.study_temperature_humidity_temperature:
      name: "Study Temperature"
      expose: true
      room: "Study"

    sensor.living_temperature_humidity_temperature:
      name: "Living Room Temperature"
      expose: true
      room: "Living Room"

    sensor.bed_temperature_humidity_sensor_temperature:
      name: "Bedroom Temperature"
      expose: true
      room: "Bedroom"

    sensor.kitchen_temperature_humidity_temperature:
      name: "Kitchen Temperature"
      expose: true
      room: "Kitchen"

    sensor.bath_temperature_humidity_temperature:
      name: "Bathroom Temperature"
      expose: true
      room: "Bathroom"

    sensor.balcony_temperature_humidity_temperature:
      name: "Balcony Temperature"
      expose: true
      room: "Balcony"

    # === HUMIDITY SENSORS ===
    sensor.study_temperature_humidity_humidity:
      name: "Study Humidity"
      expose: true
      room: "Study"

    sensor.living_temperature_humidity_humidity:
      name: "Living Room Humidity"
      expose: true
      room: "Living Room"

    sensor.bed_temperature_humidity_sensor_humidity:
      name: "Bedroom Humidity"
      expose: true
      room: "Bedroom"

    # === CO2 SENSOR ===
    sensor.co2_co2:
      name: "Air Quality"
      expose: true
      room: "Living Room"

    # === MOTION SENSOR ===
    binary_sensor.motion_detector_occupancy:
      name: "Bathroom Motion Sensor"
      expose: true
      room: "Bathroom"

    # === CONTACT SENSOR ===
    binary_sensor.contact_sensor_1_contact:
      name: "Door Sensor"
      expose: true
      room: "Entry"

# =============================================================================
# AUTOMATIONS
# Purpose: Event-driven actions for smart home
# =============================================================================
automation: !include automations.yaml
